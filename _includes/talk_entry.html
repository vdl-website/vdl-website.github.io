<div class="talk">
    <p >
        <b>{{talk.title }}</b>
        {% if talk.abstract %}
        <button class="talk-abstract-toggle" aria-expanded="false">abstract</button>
        {% endif %}
        <span style="float:right">
        {% if talk.video %}
        <!-- this is typically a youtube link -->
        <a href="{{talk.video}}">Video</a> |
        {% endif %}
        {% if talk.slides-key %}
        <a href="{{ site.talk_content_url }}{{talk.slides-key}}">Key</a> |
        {% endif %}
        {% if talk.slides-ppt %}
        <a href="{{ site.talk_content_url }}{{talk.slides-ppt}}">PPT</a> |
        {% endif %}
        {% if talk.slides-pdf %}
        <a href="{{ site.talk_content_url }}{{talk.slides-pdf}}">PDF</a>
        {% endif %}
        </span> <br>
        {% if talk.note %}
        {{ talk.note }}
        {% endif %}

        <!-- abstract with expandable/collapsible functionality -->
        {% if talk.abstract %}
        <div class="talk-abstract-wrapper">
            <div class="talk-abstract" hidden>
                <b>Abstract: </b>{{ talk.abstract }}
            </div>
        </div>
        {% endif %}
        <div class="talk-entry">
        {% for instance in talk.held %}
        {{ instance  | markdownify}} 
        {% endfor %}
        </div>
    </p>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const toggles = document.querySelectorAll('.talk-abstract-toggle');
    toggles.forEach(toggle => {
        toggle.addEventListener('click', function() {
            const talk = this.closest('.talk');
            const wrapper = talk.querySelector('.talk-abstract-wrapper');
            const abstract = wrapper.querySelector('.talk-abstract');
            const isHidden = abstract.hasAttribute('hidden');
            
            if (isHidden) {
                abstract.removeAttribute('hidden');
                this.setAttribute('aria-expanded', 'true');
            } else {
                abstract.setAttribute('hidden', '');
                this.setAttribute('aria-expanded', 'false');
            }
        });
    });
});
</script>
